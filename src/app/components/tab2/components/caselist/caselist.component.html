<ion-list>
  <ion-item-sliding *ngFor="let case of cases">
    <ion-item-options side="start">
      <ion-item-option (click)="upvote(case.id)" color="primary" *ngIf="case.user_vote !== 1">
        <ion-icon name="thumbs-up-outline"></ion-icon>
      </ion-item-option>
      <ion-item-option (click)="downvote(case.id)" color="danger" *ngIf="case.user_vote !== -1">
        <ion-icon name="thumbs-down-outline"></ion-icon>
      </ion-item-option>
    </ion-item-options>

    <ion-item>
      <ion-label (click)="navigateToCaseDetails(case.id,$event)">
        <h2>{{ case.title }}</h2>
        <h5>{{ HelperUtils.formatCrimeType(case.case_type) }} | {{ HelperUtils.formatStatus(case.status) }}
          | {{ case.distance_to_location | number : '1.0-0' }}km entfernt</h5>
        <h5>Am {{ case.crime_date_time | date: 'dd.MM.YYYY' }} in {{ case.zip_code }}, {{ case.place_name }}</h5>
        <p>{{ case.summary }}</p>
        <ion-grid>
          <ion-row>
            <ion-col >
              <p class="created-at">Erstellt am: {{ case.created_at | date: 'dd.MM.yyyy, HH:mm' }} </p>
              <p class="created-by"> von {{ case.creator_username }}</p>
            </ion-col>
            <ion-col size="auto">
              <ion-avatar >
                <img [src]="case.creator_avatar_url" alt="User Avatar">
              </ion-avatar>
            </ion-col>
          </ion-row>
        </ion-grid>



      </ion-label>

      <div class="media-icons" slot="end">
        <ion-icon *ngIf="case.has_podcast" name="mic-circle-outline"></ion-icon>
        <ion-icon *ngIf="case.has_newspaper" name="newspaper-outline"></ion-icon>
        <ion-icon *ngIf="case.has_book" name="book-outline"></ion-icon>
        <ion-icon *ngIf="case.has_media" name="images-outline"></ion-icon>
      </div>

      <div class="voting-buttons" slot="end">
        <ion-button (click)="upvote(case.id)" fill="clear" [disabled]="case.user_vote === 1">
          <ion-icon name="chevron-up-outline" slot="icon-only"></ion-icon>
        </ion-button>
        <span>{{ case.upvotes - case.downvotes }}</span>
        <ion-button (click)="downvote(case.id)" fill="clear" [disabled]="case.user_vote === -1">
          <ion-icon name="chevron-down-outline" slot="icon-only"></ion-icon>
        </ion-button>
      </div>
    </ion-item>

    <ion-item-options side="end">
      <ion-item-option (click)="editCase(case.id)">
        <ion-icon slot="icon-only" name="create-outline"></ion-icon>
      </ion-item-option>
    </ion-item-options>
  </ion-item-sliding>
</ion-list>



